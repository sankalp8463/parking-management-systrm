<div class="payments-page">
  <div class="container">
    <h1>Payment Management</h1>
    
    <!-- Stats -->
    <div class="payment-stats">
      
      <div class="stat-card revenue">
        <h3>Daily Revenue</h3>
        <p class="stat-number">₹{{paymentStats.revenue}}</p>
      </div>
      <div class="stat-card payments">
        <h3>Daily Payments</h3>
        <p class="stat-number">{{paymentStats.total}}</p>
      </div>
      <div class="stat-card pending">
        <h3>Pending Payments</h3>
        <p class="stat-number">₹{{paymentStats.pending}}</p>
      </div>
    </div>

    <!-- History -->
    <div class="payments-list">
      <div class="payment-header">
        <h2>Payment History</h2>
        <button class="btn-create" (click)="openModal()"><b>+ Create Payment</b></button>
      </div>
      
      <div class="payments-table">
        <table>
          <thead>
            <tr>
              <th>Vehicle Number</th>
              <th>Amount</th>
              <th>Payment Method</th>
              <th>Status</th>
              <th>Date</th>
              <th>Transaction ID</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let payment of payments">
              <td>{{payment.vehicleNumber}}</td>
              <td>₹{{payment.amountPaid}}</td>
              <td>{{payment.paymentMethod}}</td>
              <td>
                <span class="status" [class]="payment.paymentStatus">
                  {{payment.paymentStatus}}
                </span>
              </td>
              <td>{{payment.paymentDate | date:'short'}}</td>
              <td>{{payment.transactionId || 'N/A'}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div> <!-- end .container -->

  <!-- Create Payment Modal -->
  <div class="modal" *ngIf="showModal" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <h3 style="text-align: center;">Create Payment</h3>
      <form (ngSubmit)="createPayment()" #paymentForm="ngForm">
        <div class="form-group">
          <label>Vehicle Number</label>
          <input type="text" [(ngModel)]="newPayment.vehicleNumber" name="vehicleNumber" required>
        </div>
        <div class="form-group">
          <label>Amount</label>
          <input type="number" [(ngModel)]="newPayment.amountPaid" name="amountPaid" required>
        </div>
        <div class="form-group">
          <label>Payment Method</label>
          <select [(ngModel)]="newPayment.paymentMethod" name="paymentMethod" required>
            <option value="cash">Cash</option>
            <option value="razorpay">Razorpay</option>
          </select>
        </div>
        <div class="form-group" *ngIf="newPayment.paymentMethod === 'razorpay'">
          <label>Transaction ID</label>
          <input type="text" [(ngModel)]="newPayment.transactionId" name="transactionId">
        </div>
        <div class="modal-actions">
          <button type="submit" class="btn-secondary" [disabled]="!paymentForm.valid">
            Create Payment
          </button>
          <button type="button" class="btn-secondary" (click)="closeModal()">
            Cancel
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
