<div class="dashboard-container responsive-container">
  <!-- Enhanced Header Section -->
  
  <!-- Enhanced Statistics Cards -->
  <div class="stats-grid">
    <div class="stat-card-wrapper" [class.loading]="isLoading">
      <p-card styleClass="stat-card stat-card-primary">
        <div class="stat-content">
          <div class="stat-header">
            <div class="stat-icon stat-icon-primary">
              <i class="pi pi-car"></i>
            </div>
            <div class="stat-trend positive">
              <i class="pi pi-arrow-up"></i>
              <span>+5%</span>
            </div>
          </div>
          <div class="stat-info">
            <div class="stat-label">Total Vehicles</div>
            <div class="stat-value" [class.animate]="animateStats">
              {{isLoading ? '---' : stats.totalVehicles}}
            </div>
            <div class="stat-meta">
              <p-tag value="Active" severity="info" styleClass="stat-tag"></p-tag>
              <span class="stat-description">Registered vehicles</span>
            </div>
          </div>
        </div>
      </p-card>
    </div>

    <div class="stat-card-wrapper" [class.loading]="isLoading">
      <p-card styleClass="stat-card stat-card-success">
        <div class="stat-content">
          <div class="stat-header">
            <div class="stat-icon stat-icon-success">
              <i class="pi pi-bolt"></i>
            </div>
            <div class="stat-trend positive">
              <i class="pi pi-arrow-up"></i>
              <span>+2</span>
            </div>
          </div>
          <div class="stat-info">
            <div class="stat-label">Active Entries</div>
            <div class="stat-value" [class.animate]="animateStats">
              {{isLoading ? '---' : stats.activeEntries}}
            </div>
            <div class="stat-meta">
              <p-tag value="Live" severity="success" styleClass="stat-tag"></p-tag>
              <span class="stat-description">Currently parked</span>
            </div>
          </div>
        </div>
      </p-card>
    </div>

    <div class="stat-card-wrapper" [class.loading]="isLoading">
      <p-card styleClass="stat-card stat-card-warning">
        <div class="stat-content">
          <div class="stat-header">
            <div class="stat-icon stat-icon-warning">
              <i class="pi pi-map-marker"></i>
            </div>
            <div class="stat-capacity">
              <div class="capacity-bar">
                <div class="capacity-fill" [style.width.%]="getOccupancyPercentage()"></div>
              </div>
            </div>
          </div>
          <div class="stat-info">
            <div class="stat-label">Available Slots</div>
            <div class="stat-value" [class.animate]="animateStats">
              {{isLoading ? '---' : stats.availableSlots}}
            </div>
            <div class="stat-meta">
              <p-tag value="Ready" severity="warning" styleClass="stat-tag"></p-tag>
              <span class="stat-description">{{getOccupancyPercentage()}}% occupied</span>
            </div>
          </div>
        </div>
      </p-card>
    </div>

    <div class="stat-card-wrapper" [class.loading]="isLoading">
      <p-card styleClass="stat-card stat-card-secondary">
        <div class="stat-content">
          <div class="stat-header">
            <div class="stat-icon stat-icon-secondary">
              <i class="pi pi-dollar"></i>
            </div>
            <div class="stat-trend positive">
              <i class="pi pi-arrow-up"></i>
              <span>+12%</span>
            </div>
          </div>
          <div class="stat-info">
            <div class="stat-label">Daily Revenue</div>
            <div class="stat-value" [class.animate]="animateStats">
              {{isLoading ? '---' : '₹' + stats.dailyRevenue}}
            </div>
            <div class="stat-meta">
              <p-tag value="Today" severity="contrast" styleClass="stat-tag"></p-tag>
              <span class="stat-description">vs yesterday</span>
            </div>
          </div>
        </div>
      </p-card>
    </div>
  </div>

  <!-- Main Dashboard Grid -->
  <div class="dashboard-grid">
    
    <!-- Charts Section -->
    <div class="charts-section">
      
      <!-- Occupancy Chart -->
      <p-card header="Parking Occupancy" styleClass="chart-card">
        <div class="occupancy-display">
          <div class="occupancy-circle">
            <div class="circle-progress" [style.--percentage]="getOccupancyPercentage() + '%'">
              <div class="circle-inner">
                <div class="occupancy-percentage">{{getOccupancyPercentage()}}%</div>
                <div class="occupancy-label">Occupied</div>
              </div>
            </div>
          </div>
          <div class="occupancy-details">
            <div class="occupancy-item">
              <span class="occupancy-dot occupied"></span>
              <span class="occupancy-name">Occupied: {{stats.activeEntries}}</span>
            </div>
            <div class="occupancy-item">
              <span class="occupancy-dot available"></span>
              <span class="occupancy-name">Available: {{stats.availableSlots}}</span>
            </div>
          </div>
        </div>
      </p-card>

      <!-- Revenue Chart -->
      <p-card header="Weekly Revenue Trend" styleClass="chart-card">
        <p-chart 
          type="line" 
          [data]="revenueChartData" 
          [options]="chartOptions"
          height="250px">
        </p-chart>
      </p-card>
    </div>

    <!-- Actions and Activity Section -->
    <div class="actions-activity-section">
      
      <!-- Quick Actions -->
      <p-card header="Quick Actions" styleClass="actions-card">
        <div class="actions-grid">
          <p-button 
            label="Vehicle Management" 
            icon="pi pi-plus" 
            routerLink="/parking"
            styleClass="p-button-primary action-btn">
          </p-button>
          <p-button 
            label="Manage Slots" 
            icon="pi pi-th-large" 
            routerLink="/slots"
            styleClass="p-button-secondary action-btn">
          </p-button>
          <p-button 
            label="View Payments" 
            icon="pi pi-credit-card" 
            routerLink="/payments"
            styleClass="p-button-success action-btn">
          </p-button>
          <p-button 
            label="View History" 
            icon="pi pi-history" 
            routerLink="/history"
            styleClass="p-button-warning action-btn">
          </p-button>
        </div>
      </p-card>

      <!-- Recent Activity Timeline -->
      <p-card header="Recent Activity" styleClass="activity-card">
        <p-timeline [value]="timelineEvents" align="left">
          <ng-template pTemplate="marker" let-event>
            <div class="custom-marker" [style.background-color]="event.color">
              <i [class]="event.icon"></i>
            </div>
          </ng-template>
          <ng-template pTemplate="content" let-event>
            <div class="timeline-content">
              <div class="timeline-header">
                <p-tag 
                  [value]="event.status" 
                  [severity]="getSeverityForActivity(event.status.toLowerCase())"
                  styleClass="timeline-tag">
                </p-tag>
                <span class="timeline-time">{{event.date}}</span>
              </div>
              <p class="timeline-description">{{event.description}}</p>
              <div class="timeline-details" *ngIf="event.vehicle">
                <p-badge 
                  *ngIf="event.vehicle" 
                  [value]="event.vehicle" 
                  styleClass="vehicle-badge">
                </p-badge>
                <p-badge 
                  *ngIf="event.slot" 
                  [value]="'Slot: ' + event.slot" 
                  severity="info" 
                  styleClass="slot-badge">
                </p-badge>
                <p-badge 
                  *ngIf="event.amount" 
                  [value]="'₹' + event.amount" 
                  severity="success" 
                  styleClass="amount-badge">
                </p-badge>
              </div>
            </div>
          </ng-template>
        </p-timeline>
      </p-card>
    </div>
  </div>
</div>